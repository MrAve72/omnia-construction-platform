# Система учета источников клиентов (Referral Sources)

Эта документация описывает функциональность источников рефералов в системе бронирования и управления клиентами Daryna Construction LLC.

## Обзор

Система источников рефералов позволяет отслеживать, откуда клиенты узнали о компании. Эта информация полезна для анализа эффективности маркетинговых каналов и принятия решений о распределении маркетингового бюджета.

## Архитектура

Система состоит из следующих компонентов:

1. **Модель данных** - `ReferralSource` в базе данных
2. **API сервисы** - для управления источниками рефералов
3. **Компоненты интерфейса администратора** - для добавления, редактирования и удаления источников
4. **Компоненты пользовательского интерфейса** - для выбора источника при бронировании

## База данных

Модель `ReferralSource` имеет следующую структуру:

- `id` (Integer): Уникальный идентификатор источника
- `name` (String): Название источника
- `createdAt` (DateTime): Дата и время создания записи
- `updatedAt` (DateTime): Дата и время последнего обновления записи

Модель связана с моделью `Consultation` отношением один-ко-многим (один источник может быть связан с множеством консультаций).

## API Endpoints

### Получение всех источников

```
GET /api/referral-source
```

Возвращает список всех источников рефералов.

### Получение источника по ID

```
GET /api/referral-source/:id
```

Возвращает информацию о конкретном источнике по его ID.

### Добавление нового источника

```
POST /api/referral-source
```

Создает новый источник рефералов. Требует следующие данные:

```json
{
  "name": "Название источника"
}
```

### Обновление источника

```
PUT /api/referral-source/:id
```

Обновляет существующий источник. Требует следующие данные:

```json
{
  "name": "Новое название источника"
}
```

### Удаление источника

```
DELETE /api/referral-source/:id
```

Удаляет источник по указанному ID.

## Интеграция с формой бронирования

Форма бронирования на сайте включает поле выбора "How did you hear about us?", которое загружает данные из API источников рефералов. При отправке формы, выбранный источник сохраняется в базе данных вместе с другими данными консультации.

## Администрирование

В административной панели доступна страница управления источниками рефералов, где администраторы могут:

1. Просматривать список всех источников
2. Добавлять новые источники
3. Редактировать существующие источники
4. Удалять источники

## Отчетность

Информация об источниках рефералов отображается в административной панели на странице консультаций, что позволяет администраторам видеть, откуда пришел каждый клиент. 